<template>
	<div class="schedule-far" v-if="entries" :class="roomStatusClass">
<<<<<<< HEAD
		<div class="bg-current"></div>
=======
		<!-- <div class="bg-current"></div> -->
>>>>>>> far-view-UI-update
		<div class="room-status-info">
			<div >
				<div class="room-status-soon" v-if="roomStatusClass != 'free' && roomStatusClass != 'occupied'">Soon</div>
				<div v-else class="room-status-not-soon"> &nbsp</div>

				<div class="room-status-intro-text">
					{{ roomStatusText }}
				</div>

				<div v-if="roomStatusClass == 'free'" id="free-icon">
					<svg width="201px" height="201px" viewBox="0 0 201 201" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
							<defs>
									<path d="M180.5,378 C129.563877,378 88,336.436123 88,285.5 C88,234.563877 129.563877,193 180.5,193 C231.436123,193 273,234.563877 273,285.5 C273,336.436123 231.436123,378 180.5,378 Z M226.001035,251.164282 C222.933063,248.10855 218.22884,248.10855 215.160868,251.164282 L166.277854,301.889437 L144.597521,279.277019 C141.529549,276.221287 136.825326,276.221287 133.757355,279.277019 C130.689383,282.332751 130.689383,287.425638 133.757355,290.48137 L160.960036,318.594107 C164.028008,321.649839 168.732231,321.649839 171.800203,318.594107 L226.001035,262.368634 C229.069006,259.312902 229.069006,254.220015 226.001035,251.164282 Z" id="path-1"></path>
									<filter x="-5.9%" y="-5.9%" width="114.1%" height="114.1%" filterUnits="objectBoundingBox" id="filter-2">
											<feOffset dx="2" dy="2" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset>
											<feGaussianBlur stdDeviation="4" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>
											<feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.1 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>
									</filter>
							</defs>
							<g id="Iteration-3" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
									<g id="Free-Until-Far" transform="translate(-286.000000, -457.000000)" fill-rule="nonzero">
											<g id="Main-Info" transform="translate(204.000000, 270.000000)">
													<g id="Shape-Copy">
															<use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use>
															<use fill="#FFFFFF" xlink:href="#path-1"></use>
													</g>
											</g>
									</g>
							</g>
					</svg>
				</div>
<<<<<<< HEAD

				<timer-icon :entries="entries" :timeRemaining="timeRemaining"></timer-icon>
=======
				<div v-else-if="roomStatusClass == 'occupied-soon'">
					<svg width="185px" height="185px" viewBox="0 0 185 185" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
						<g id="Iteration-4" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
								<g id="Soon-Busy-Far" transform="translate(-292.000000, -443.000000)">
										<g id="Group" transform="translate(292.000000, 443.000000)">
												<path d="M92.5,185 C41.4136606,185 1.4210421e-14,143.586339 1.4210421e-14,92.5 C1.4210421e-14,41.4136606 41.4136606,0 92.5,0 C143.586339,0 185,41.4136606 185,92.5 C185,143.586339 143.586339,185 92.5,185 Z M106.1732,76 L92.4995011,76.0059407 L78.824804,76 C77.9636493,76 77.2671418,76.692091 77.2671418,77.5445808 C77.2671418,77.9921132 77.4577334,78.3950904 77.7660727,78.6762833 L77.7511048,78.7139077 L88.7535282,89.1022039 C88.7824661,89.1299271 88.8104063,89.1596306 88.8393443,89.1883439 C88.8682823,89.2180474 88.899216,89.2447806 88.9271561,89.274484 C88.9321454,89.2794346 88.9341411,89.2843852 88.9401283,89.2893358 C88.9820385,89.3329009 89.0209551,89.3774561 89.0628653,89.4210212 C89.086814,89.4467642 89.1117605,89.4734973 89.1357092,89.5012206 C89.1766215,89.5497363 89.2185317,89.6012223 89.259444,89.6507281 C89.2794013,89.6744909 89.2983607,89.6972635 89.3183179,89.7210263 C89.3582324,89.7735024 89.397149,89.8269687 89.4370634,89.8814251 C89.4550249,89.9051879 89.4709907,89.9279605 89.4879544,89.9517233 C89.5248753,90.0041995 89.5598004,90.0566756 89.5937277,90.1101419 C89.6116892,90.1358849 89.6286529,90.1616279 89.6456165,90.1873709 C89.6775481,90.2368767 89.707484,90.2883627 89.736422,90.3398488 C89.7533856,90.3695522 89.772345,90.4002458 89.7903065,90.4299493 C89.8162509,90.4764847 89.8392017,90.5240103 89.866144,90.5705458 C89.8851033,90.6061899 89.9040627,90.6428242 89.9220242,90.6774783 C89.9439772,90.7190631 89.9629366,90.7616381 89.9838917,90.8061933 C90.0048468,90.8467881 90.0238061,90.888373 90.0407698,90.9299578 C90.0587313,90.9685724 90.0717035,91.008177 90.0886671,91.0458014 C90.1096222,91.093327 90.1285816,91.1408525 90.1465431,91.1883781 C90.1595153,91.2200618 90.1714897,91.255706 90.183464,91.2893699 C90.2004277,91.3418461 90.219387,91.3943222 90.2373485,91.4477885 C90.2473272,91.4774919 90.2573058,91.5101658 90.2642908,91.5408594 C90.2822523,91.597296 90.299216,91.6527425 90.3151818,91.7101692 C90.3221668,91.7388825 90.3301497,91.7695761 90.3371347,91.7963093 C90.3521026,91.8567063 90.3660727,91.9161133 90.3790449,91.9755202 C90.3860299,92.0042336 90.3920171,92.0339371 90.3970064,92.0616603 C90.4089808,92.1220574 90.421953,92.1814643 90.4309337,92.2428515 C90.4369209,92.272555 90.4409123,92.3042387 90.4459016,92.3359224 C90.4548824,92.3933492 90.4638632,92.451766 90.4708482,92.5091927 C90.4758375,92.5438468 90.4778332,92.5794909 90.4808268,92.6121648 C90.486814,92.6676113 90.493799,92.7220676 90.4987883,92.7785042 C90.500784,92.8171188 90.500784,92.8557333 90.5037776,92.896328 C90.5057733,92.9458338 90.5087669,92.9973199 90.5107627,93.0478158 L90.5107627,93.1824715 L90.5107627,108.588675 C90.5107627,112.495673 88.0679971,113.465986 86.4464718,113.92441 C82.591732,115.017498 71.7110478,117.110603 70.2631504,117.386845 C70.2192445,117.394766 70.1763364,117.403677 70.1324305,117.412588 C70.1124733,117.414568 70.1014968,117.418529 70.1014968,117.418529 L70.1014968,117.420509 C68.8990734,117.703682 68,118.776968 68,120.056198 L68,125.671145 L68,131.286092 C68,132.782157 69.2263721,134 70.7341411,134 L92.4995011,134 L114.266857,134 C115.775624,134 117,132.782157 117,131.286092 L117,125.671145 L117,120.056198 C117,118.776968 116.101924,117.702692 114.898503,117.420509 L114.900499,117.418529 C114.900499,117.418529 114.886529,117.414568 114.868567,117.412588 C114.826657,117.402687 114.783749,117.393776 114.738845,117.386845 C113.297933,117.110603 102.410264,115.016508 98.554526,113.92441 C96.9339986,113.465986 94.4942267,112.496663 94.4902352,108.594616 L94.4902352,93.1824715 L94.4902352,93.0478158 C94.4922309,92.99831 94.4952245,92.9468239 94.4982181,92.8973182 C94.5012117,92.8587036 94.5022096,92.819099 94.5042053,92.7794944 C94.5081967,92.7230578 94.5151818,92.6686014 94.5201711,92.614145 C94.5231646,92.5804811 94.528154,92.545827 94.5311475,92.5111729 C94.5401283,92.4537462 94.5481112,92.3953294 94.5550962,92.3379027 C94.5630791,92.306219 94.5650748,92.2745352 94.5700641,92.2438416 C94.5830364,92.1824545 94.5940128,92.1220574 94.6059872,92.0626504 C94.6109765,92.0359173 94.6169636,92.0052237 94.621953,91.9775005 C94.635923,91.9180935 94.6508909,91.8586866 94.6668567,91.7982895 C94.6738418,91.7705662 94.6808268,91.7398727 94.6878118,91.7121494 C94.7047755,91.6547227 94.7187455,91.5982861 94.7377049,91.5428396 C94.7486814,91.5131361 94.7576622,91.4804623 94.7646472,91.4497687 C94.7846044,91.3963024 94.8015681,91.3438263 94.8205274,91.2913501 C94.8334996,91.2576862 94.8444761,91.2230321 94.8564505,91.1893682 C94.8754098,91.1428328 94.8933713,91.0953072 94.9143264,91.0467915 C94.9312901,91.0091671 94.9442623,90.9695625 94.9632217,90.9319381 C94.9811832,90.8903532 95.0011404,90.8497584 95.0210976,90.8071835 C95.0410549,90.7646085 95.0590164,90.7220335 95.0819672,90.6784684 C95.0999287,90.6428242 95.1178902,90.60718 95.1358517,90.5715359 C95.1637919,90.5250004 95.1857448,90.4774749 95.213685,90.4309394 C95.2326443,90.4012359 95.249608,90.3715325 95.2665716,90.341829 C95.2965075,90.290343 95.3274412,90.2388569 95.3583749,90.1893511 C95.3763364,90.1636081 95.3913043,90.1388552 95.4102637,90.1121221 C95.4431932,90.0586558 95.4791162,90.0061797 95.5150392,89.9537035 C95.5339986,89.9299408 95.5489665,89.9071681 95.5679259,89.8834053 C95.6058446,89.8299391 95.6447612,89.7764728 95.6846757,89.7239967 C95.7056308,89.7002339 95.7235923,89.6774612 95.7435495,89.6536984 C95.7844619,89.6032025 95.8263721,89.5517165 95.8682823,89.5032008 C95.8912331,89.4764677 95.9171775,89.4497345 95.9411262,89.4239915 C95.9810406,89.3804264 96.0199572,89.3368613 96.0628653,89.2923061 C96.0668567,89.2873555 96.071846,89.282405 96.0768354,89.2774544 C96.1037776,89.2477509 96.1357092,89.2200277 96.1646472,89.1913143 C96.1925873,89.163591 96.2205274,89.1319073 96.2514612,89.1051742 L107.252887,78.7168781 L107.236921,78.6792537 C107.54526,78.3970706 107.735852,77.9950836 107.735852,77.5475512 C107.733856,76.692091 107.033357,76 106.1732,76 Z M119.5146,67.5629782 C119.5146,69.8321366 118.3996,71.7288198 115.5486,74.2783149 C115.4586,74.3459485 115.3706,74.417503 115.2886,74.4959188 L97.9016,90.8162158 C97.8826,90.831899 97.8706,90.8485624 97.8556,90.8632653 C97.8396,90.8789485 97.8246,90.8907109 97.8066,90.9083545 C97.7856,90.9289386 97.7696,90.9514832 97.7476,90.9740277 C97.7126,91.0132356 97.6756,91.0534238 97.6426,91.0945921 C97.6126,91.1318396 97.5806,91.1720277 97.5526,91.2102554 C97.5226,91.2514238 97.4906,91.2935723 97.4606,91.3386614 C97.4346,91.3798297 97.4076,91.4200178 97.3826,91.4621663 C97.3566,91.505295 97.3306,91.5484238 97.3066,91.5935129 C97.2826,91.6366416 97.2616,91.6807505 97.2406,91.7258396 C97.2186,91.7689683 97.1996,91.8130772 97.1806,91.8581663 C97.1606,91.9042356 97.1436,91.9512851 97.1256,91.9983347 C97.1106,92.0424436 97.0966,92.0865525 97.0816,92.1316416 C97.0676,92.1786911 97.0546,92.227701 97.0426,92.2757307 C97.0306,92.3218 97.0206,92.3659089 97.0126,92.4119782 C97.0026,92.4619683 96.9936,92.5090178 96.9876,92.5590079 C96.9826,92.6060574 96.9736,92.6521267 96.9686,92.6991762 C96.9636,92.7472059 96.9606,92.7962158 96.9586,92.8442455 C96.9556,92.8922752 96.9556,92.9412851 96.9556,92.9893149 C96.9556,93.0363644 96.9576,93.0843941 96.9596,93.1324238 C96.9626,93.1814337 96.9646,93.2294634 96.9706,93.2784733 C96.9756,93.3255228 96.9826,93.3715921 96.9896,93.4176614 C96.9966,93.4666713 97.0046,93.5166614 97.0146,93.5656713 C97.0236,93.6097802 97.0336,93.6558495 97.0446,93.7009386 C97.0556,93.7509287 97.0696,93.7989584 97.0836,93.8469881 C97.0976,93.8901168 97.1116,93.9361861 97.1286,93.9793149 C97.1476,94.0273446 97.1616,94.0743941 97.1806,94.1204634 C97.2016,94.1645723 97.2196,94.2096614 97.2436,94.2527901 C97.2636,94.296899 97.2856,94.3419881 97.3066,94.3851168 C97.3316,94.4302059 97.3566,94.4733347 97.3836,94.5164634 C97.4096,94.5576317 97.4346,94.5978198 97.4606,94.6399683 C97.4916,94.683097 97.5236,94.7232851 97.5546,94.7673941 C97.5816,94.8056218 97.6126,94.8448297 97.6436,94.8840376 C97.6766,94.9252059 97.7126,94.9634337 97.7496,95.004602 C97.7696,95.0261663 97.7856,95.0496911 97.8086,95.069295 C97.8246,95.0869386 97.8396,95.0967406 97.8556,95.113404 C97.8706,95.1300673 97.8846,95.1467307 97.9026,95.1624139 L115.2906,111.482711 C115.3726,111.560147 115.4576,111.630721 115.5476,111.699335 C118.4006,114.24785 119.5166,116.146493 119.5166,118.415651 L119.5166,130.712236 C119.5166,133.616562 117.1086,135.976879 114.1446,135.976879 L92.3276,135.976879 L70.5136,135.976879 C67.5506,135.976879 65.1406,133.616562 65.1406,130.712236 L65.1406,118.413691 C65.1406,116.145513 66.2576,114.24883 69.1076,111.697374 C69.1986,111.630721 69.2856,111.557206 69.3676,111.48075 L86.7546,95.1604535 C86.7716,95.1447703 86.7856,95.1281069 86.8016,95.1114436 C86.8166,95.0938 86.8326,95.0849782 86.8476,95.0673347 C86.8686,95.0467505 86.8846,95.0242059 86.9056,95.0036218 C86.9416,94.9644139 86.9796,94.9232455 87.0146,94.8820772 C87.0426,94.8448297 87.0736,94.8046416 87.1016,94.7673941 C87.1326,94.7242653 87.1666,94.6821168 87.1956,94.6380079 C87.2226,94.5978198 87.2476,94.5586119 87.2726,94.5174436 C87.2986,94.4723545 87.3246,94.4292257 87.3496,94.3831564 C87.3716,94.3400277 87.3936,94.296899 87.4146,94.2537703 C87.4356,94.207701 87.4556,94.1645723 87.4756,94.1194832 C87.4956,94.0734139 87.5136,94.0263644 87.5286,93.9793149 C87.5456,93.9342257 87.5586,93.891097 87.5746,93.8450277 C87.5876,93.7960178 87.6006,93.7489683 87.6136,93.7019188 C87.6236,93.6558495 87.6346,93.6097802 87.6426,93.5637109 C87.6526,93.514701 87.6616,93.4656911 87.6676,93.4186416 C87.6746,93.3715921 87.6816,93.3255228 87.6866,93.2784733 C87.6916,93.2284832 87.6956,93.1814337 87.6996,93.133404 C87.7006,93.0853743 87.7016,93.0363644 87.7016,92.990295 C87.7016,92.9422653 87.7006,92.8942356 87.6996,92.8462059 C87.6966,92.7991564 87.6926,92.7491663 87.6866,92.7011366 C87.6816,92.6540871 87.6756,92.6080178 87.6676,92.5609683 C87.6606,92.5119584 87.6526,92.4639287 87.6426,92.4139386 C87.6336,92.3678693 87.6226,92.3237604 87.6136,92.2776911 C87.6006,92.2296614 87.5876,92.1816317 87.5746,92.133602 C87.5586,92.0885129 87.5446,92.0434238 87.5286,91.9983347 C87.5136,91.9532455 87.4956,91.9052158 87.4756,91.8591465 C87.4556,91.8150376 87.4366,91.7709287 87.4146,91.7258396 C87.3936,91.6807505 87.3716,91.638602 87.3496,91.5944931 C87.3256,91.5503842 87.3006,91.5062752 87.2726,91.4621663 C87.2476,91.420998 87.2236,91.3817901 87.1956,91.3406218 C87.1666,91.2965129 87.1336,91.2533842 87.1016,91.2112356 C87.0736,91.1730079 87.0426,91.1347802 87.0146,91.0975327 C86.9786,91.0563644 86.9416,91.015196 86.9056,90.9750079 C86.8846,90.9544238 86.8686,90.9318792 86.8476,90.9103149 C86.8326,90.8946317 86.8166,90.8818891 86.8006,90.8662059 C86.7846,90.8495426 86.7716,90.8338594 86.7556,90.8181762 L69.3676,74.4988594 C69.2856,74.422404 69.1996,74.3508495 69.1106,74.284196 C66.2566,71.734701 65.1426,69.8370376 65.1426,67.566899 L65.1426,55.2693347 C65.1426,52.3659881 67.5516,50.0037109 70.5146,50.0037109 L92.3276,50.0037109 L114.1426,50.0037109 C117.1056,50.0037109 119.5136,52.3659881 119.5136,55.2693347 L119.5136,67.5629782 L119.5146,67.5629782 Z M114.1426,43.9794139 L92.3276,43.9794139 L70.5136,43.9794139 C64.1636,43.9794139 58.9996,49.0431168 58.9996,55.2634535 L58.9996,67.5659188 L58.9996,67.566899 C58.9996,69.8938891 59.6646,72.1267802 60.9736,74.2038198 C61.9436,75.7397901 63.2806,77.2375327 65.1826,78.9156317 C65.2226,78.9489584 65.2616,78.9832653 65.3036,79.0146317 L80.1906,92.9893149 L65.3046,106.963018 C65.2626,106.995364 65.2226,107.028691 65.1826,107.062998 C62.3066,109.601711 59.0016,113.181394 58.9996,118.41075 L58.9996,118.412711 L58.9996,130.715176 C58.9996,136.937473 64.1636,142.000196 70.5136,142.000196 L92.3276,142.000196 L114.1426,142.000196 C120.4926,142.000196 125.6566,136.937473 125.6566,130.715176 L125.6566,118.412711 L125.6566,118.41075 C125.6556,116.08278 124.9916,113.850869 123.6816,111.77481 C122.7106,110.237859 121.3736,108.740117 119.4716,107.062018 C119.4326,107.028691 119.3926,106.995364 119.3506,106.962038 L104.4646,92.9893149 L119.3516,79.0156119 C119.3926,78.9832653 119.4336,78.9499386 119.4726,78.9156317 C122.3506,76.377899 125.6556,72.7962554 125.6576,67.5688594 L125.6576,67.566899 L125.6576,55.2634535 C125.6566,49.0431168 120.4926,43.9794139 114.1426,43.9794139 Z" id="Combined-Shape" fill="#FFFFFF"></path>
												<g id="Hour-Glass" transform="translate(59.000000, 43.000000)">
														<g id="Group-5"></g>
												</g>
										</g>
								</g>
						</g>
					</svg>
				</div>

				<timer-icon :entries="entries" :timeRemaining="timeRemaining" v-if="roomStatus == 'free-soon' || roomStatus == 'occupied'"></timer-icon>
>>>>>>> far-view-UI-update

				<div class="room-status-time">
					<div v-if="roomStatusClass == 'free-soon' || roomStatusClass == 'occupied-soon'">In&nbsp</div>
					<div v-else-if="(roomStatusClass == 'occupied' || roomStatusClass == 'free') && roomStatusTimeAmount != Infinity">For&nbsp</div>
					<div class="room-status-time-amount" v-if="roomStatusTimeAmount != Infinity"> {{ roomStatusTimeAmount | round }}</div>
					<div class="room-status-time-amount" v-else>All day</div>
					&nbsp
					<div v-if="roomStatusTimeAmount != Infinity" class="room-status-time-units">{{ roomStatusTimeUnits }}</div>
				</div>
			</div>
			<RoomDetailsPanel :roomStatus="roomStatus" :organizer="currentOrganizer()" :booking="currentEntry" v-if="roomStatusClass != 'free'"></RoomDetailsPanel>
		</div>
	</div>
</template>

<script>
	import {getRoomName} from '@/services/roomsService'
	import {getCurrentEntry, getProgressUntilEntryEnd, getProgressUntilNextEntry, getNextEntry, getNextFreeTime} from '@/services/calendarService'
	import TimerIcon from './TimerIcon'
	import TopBar from './TopBar.vue'
	import RoomDetailsPanel from './RoomDetailsPanel.vue'

	const refreshEveryMilliSeconds = 60000

	export default {
		props: {
			entries: Array
		},
		data() {
			return {
				roomName: null,
				updateInterval: null,
				roomStatus: null,
				// currentOrganizer: null,
			}
		},
		components: {
			TimerIcon,
			TopBar,
			RoomDetailsPanel
		},
		computed: {
			attendees() {
				return this.entry.attendees.map(attendee => {
					const isOrganizer = this.isOrganizer(attendee)
					return {
						name: attendee,
						isOrganizer
					}
				}).sort((a,b) => {
					if(a.isOrganizer && !(b.isOrganizer)) {
						return -1
					}
					if(!(a.isOrganizer) && b.isOrganizer) {
						return 1
					}
					return 0
				})
			},
			currentEntry() {
				return getCurrentEntry(this.entries)
			},
			nextEntry() {
				return getNextEntry(this.entries)
			},
			roomStatusText() {
				if (this.currentEntry && (this.timeRemaining / 60000) > 30 ) {
					return 'BUSY'
				}
				else if ( this.currentEntry && (this.timeRemaining / 60000) <= 30) {
					return 'FREE' // soon free
				}
				else {
					if (this.nextEntry &&  getProgressUntilNextEntry(this.nextEntry) >= 0.5) {
						return 'BUSY' // soon busy
					} else {
						return 'FREE'
					}
				}
			},
			roomStatusClass() {
				if (this.currentEntry && (this.timeRemaining / 60000) > 30 ) {
					this.roomStatus = "occupied";
					return 'occupied'
				}
				else if ( this.currentEntry && (this.timeRemaining / 60000) <= 30) {
					this.roomStatus = "free-soon";
					return 'free-soon' // soon free
				}
				else {
					if (this.nextEntry &&  getProgressUntilNextEntry(this.nextEntry) >= 0.5) {
						this.roomStatus = "occupied-soon";
						return 'occupied-soon' // soon busy
					} else {
						this.roomStatus = "free";
						return 'free'
					}
				}
			},
			timeRemaining() {
				if (this.currentEntry) {
					const nextFreeTime = getNextFreeTime(this.entries)
					return nextFreeTime - new Date()
				} else {
					if (this.nextEntry) {
						return this.nextEntry.start - new Date()
					} else {
						return Infinity
					}
				}
			},
			roomStatusTimeAmount() {
				const seconds = this.timeRemaining / 1000
				if (seconds < 60) {
					return seconds
				} else {
					if (seconds < 3600) {
						return seconds / 60
					} else {
						if (seconds < 3600 * 24) {
							return seconds / 3600
						} else {
							return seconds / (3600 * 24)
						}
					}
				}
			},
			roomStatusTimeUnits() {
				const seconds = this.timeRemaining / 1000
				if (seconds < 60) {
					return 's'                                  // was 'seconds'
				} else {
					if (seconds < 3600) {
						return 'min'                              // was 'minutes'
					} else {
						if (seconds < 3600 * 24) {
							return 'hr'                             // was 'hours'
						} else {
							return 'days'
						}
					}
				}
			}
		},
		filters: {
			round(amount) {
				return Math.round(amount)
			}
		},
		async mounted() {
			if (this.$route.params.user) {
					await this.refreshRoomName()
			}
			this.updateInterval = setInterval(this.refreshCalendar, refreshEveryMilliSeconds)
		},
		beforeDestroy() {
			clearInterval(this.updateInterval)
		},
		watch: {
			"$route"() {
					this.refreshCalendar()
					this.refreshRoomName()
			}
		},
		methods: {
			async refreshRoomName() {
				const roomName = await getRoomName(this.$route.params.user)
				this.roomName = roomName
			},
			currentOrganizer() {
				if (this.currentEntry){
					for (let attendee of this.currentEntry.attendees){
						if (this.currentEntry.organizer && this.currentEntry.organizer.emailAddress && this.currentEntry.organizer.emailAddress.name === attendee){
							return attendee
						}
					}
				}
				else{
					return null
				}
			},
			isOrganizer(attendeeName) {
				return this.currentEntry.organizer && this.currentEntry.organizer.emailAddress && this.currentEntry.organizer.emailAddress.name === attendeeName
			}
		}
	}
</script>

<style lang="scss" scoped>
	@import 'colors';
	@import 'gradients';

	#non-free-icon-wrapper{
		position:absolute;
		display: flex;
		align-items: center;
		left:34.5%;
		top:24.5%;
		height: 150px;
		width: 150px;
	}

	#free-icon{
		margin: auto;
		background-color: rgba(0,0,0,0);
		position: relative;
		width: 201px;
		height:201px;
	}

	#svg-icon{
		width: 50%;
		margin: 0 auto;
	}

	.room-status-not-soon {
		width: 204px;
		height: 96px;

	}

	.schedule-far {
		color: white;
		height: 100%;
		text-align: center;
		display: flex;
		// z-index:1;
		// padding-top:55px;

		.room-status-info {
			position: relative;
			margin-left: auto;
			margin-right: auto;
			margin-top:171px;
		}
		.room-status-intro-text {
			font-size: 160px;
			font-weight: bold;
		}
		.room-status-soon{
			font-size: 96px;
			font-weight: bold;
			float: left;
			padding-left: 67px;
			margin-bottom:-32px;
		}
		.room-status-time{
			font-size: 110px;
			display:flex;
			margin-top: 42px;
			justify-content: center;

		}
		.room-status-time-amount,
		.room-status-time-units {
			font-size: 110px;
			font-weight: bold;
		}
		.bg-current {
			position: absolute;
			top:0;
			left: 0;
			right: 0;
			bottom: 0;
		}
		&.occupied {
			.bg-current {
				background-image: $gradient-busy;
			}
		}
		&.free {
			.bg-current {
				background-image: $gradient-free;
			}
		}
		&.occupied-soon {
			.bg-current {
				background-image: $gradient-soon-busy;
			}
		}
		&.free-soon{
			.bg-current {
				background-image: $gradient-soon-free;
			}
		}

	}
</style>